<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>12-1 ルーレット</title>
    <link rel="stylesheet" href="12-1.css">
    <script src="./jquery-3.6.0.min.js"></script>
    <script>
        $(function () {
            for (var j = 0; j < 4; j++) {
                $('#roulette').append('<tr></tr>');
                for (var i = 1; i <= 4; i++) {
                    $('tr:last-child').append('<td>' + (j * 4 + i) + '</td>');
                }
            }
        });

        $(function () {
            $('#start').click(count_start);
            $('#stop').click(count_stop);
            $('#reset').click(count_reset);
        });

        //変数の定義
        var count = 16; //カウントダウンの数字を格納する変数
        var start_f = false;
        var interval;
        var array = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15];
        var index;

        //スタート開始
        function count_start() {
            //二度押しを防止する
            if (start_f === false) {
                interval = setInterval(count_down, 50); //0.05秒毎にcont_down関数を呼び出す
                start_f = true;
            } else {
                clearInterval(interval);
                start_f = false;
            }
            $('.pink').removeClass('pink').addClass('bisque');
        }

        //カウントダウン開始
        function count_down() {
            index = Math.floor(Math.random() * array.length);
            // $('td').addClass('tomato');
            $('td').removeClass('tomato');
            $('td').eq(array[index]).addClass('tomato');
            var num = array[index] + 1;
            // console.log('count_down():' + index);
        }

        //ストップボタンの押下
        function count_stop() {
            if (start_f === true) {
                clearInterval(interval);
                $('.tomato').addClass('pink');
                array.splice(index, 1);
                start_f = false;
                var num = array[index];
                // console.log('count_stop():' + index);
            }
        }
        //リセットボタンの押下
        function count_reset() {
            clearInterval(interval);
            $('td').removeClass();
            array = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15];
            start_f = false;
        }
    </script>
</head>

<body>
    <table id="roulette"></table>
    <div id="buttons">
        <button id="start">スタート</button>
        <button id="stop">ストップ</button>
        <button id="reset">リセット</button>
    </div>
</body>

</html>